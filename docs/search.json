[
  {
    "objectID": "analysis/index.html",
    "href": "analysis/index.html",
    "title": "Analyses",
    "section": "",
    "text": "This page lists all available analyses for the project.\n\nAnalysis 1\nAnalysis 2"
  },
  {
    "objectID": "analysis/01-explore.html",
    "href": "analysis/01-explore.html",
    "title": "RIVERSEA: Preliminary explorations",
    "section": "",
    "text": "0. Setup\nLoad dependencies.\n\nlibrary(renv)\nrenv::load()\nrenv::restore() # Install missing librairies.\nrenv::status() # Check the project state.\n\n\nlibrary(zen4R)\nlibrary(here)\n\nDownload data from Zenodo. The data file is relatively heavy (~800Mb), this operation can take a few minutes.\n\ndoi &lt;- \"10.5281/zenodo.17962542\"\ndest_dir &lt;- here(\"data\")\n\n\nif (!dir.exists(dest_dir)) dir.create(dest_dir, recursive = TRUE)\ndownload_zenodo(doi, path = dest_dir)\nunzip(here(dest_dir, \"miste_data.zip\"), exdir = dest_dir)\n\nIf everything went well, the data should have been downloaded in data/zenodo/.\n\n\n1. River data (La Vilaine)\nFirst, we focus on the river geographic data. Let’s load it.\n\nbase::load(here(dest_dir, \"zenodo\", \"processed_data\", \"reseaux_hydrographiques.rda\"))\n\nFor now, we will focus on the Vilaine bassin. We can view it using sfnetworks.\n\nlibrary(sf)\nlibrary(sfnetworks)\nnet &lt;- as_sfnetwork(rht_vilaine)\nplot(net, cex = 0.5)\n\n\n\n\n\n\n\n\nWe want to check that the network data is valid. In particular, we want to verify that there is no duplicate in the nodes, or edges data.\n\nnodes &lt;- net |&gt;\n    activate(\"nodes\") |&gt;\n    st_as_sf()\nsum(duplicated(nodes))\n\n[1] 0\n\n\n\nlibrary(dplyr)\nedges &lt;- net |&gt;\n    activate(\"edges\") |&gt;\n    st_as_sf()\nsum(duplicated(select(edges, c(\"from\", \"to\"))))\n\n[1] 0\n\n\nWe see that there is no duplication for the Vilaine network. We can proceed to the next step.\n\n\n2. Fish abundance data\n\nbase::load(here(dest_dir, \"zenodo\", \"processed_data\", \"poissons_env_temp.RData\"))\n\ncatches\n\n# A tibble: 69,823 × 6\n   sta_id pop_id ope_id annee esp_code_alternatif effectif\n    &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                  &lt;int&gt;\n 1   8530  31870  19943  2017 TRF                      159\n 2   8530  31870  19943  2017 VAI                       82\n 3   8530  31870  19944  2011 TRF                      217\n 4   8530  31870  19944  2011 VAI                        7\n 5   8530  31870  19945  2009 TRF                      232\n 6   8530  31870  19945  2009 VAI                        9\n 7   8530  31870  19946  2007 TRF                      213\n 8   8530  31870  19946  2007 VAI                       36\n 9   8530  31870  83029  2019 TRF                      126\n10   8530  31870  83029  2019 VAI                      104\n# ℹ 69,813 more rows\n\n\nLet’s rename column for clarity.\n\ncatches &lt;- catches |&gt;\n    rename(\n        species = esp_code_alternatif,\n        year = annee,\n        abundance = effectif\n    )\nspecies_names &lt;- unique(catches$species)\n\nNext, let’s add zeros where species are not found.\n\nlibrary(tidyr)\ncatches &lt;- catches |&gt;\n    pivot_wider(names_from = species, values_from = abundance, values_fill = list(abundance = 0))\ncatches &lt;- catches |&gt; pivot_longer(cols = species_names, names_to = \"species\", values_to = \"abundance\")"
  }
]